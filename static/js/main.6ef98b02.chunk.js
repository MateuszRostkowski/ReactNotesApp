(this["webpackJsonpnotes-app"]=this["webpackJsonpnotes-app"]||[]).push([[0],{205:function(e,t){},418:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),o=n(8),r=n.n(o),l=(n(81),n(82),n(11)),i=n(1),u=n(2),s=n(68),m=n(69),d=n.n(m),f=n(13),b=n.n(f),v=n(70),g=n.n(v),E=function(e){var t=e.value,n=e.language;return c.a.createElement(g.a,{language:n},t)},p=n(71),O=n.n(p),h=n(74),j=n(73),N=function(){var e=localStorage.getItem("note_lists")||"[]";return JSON.parse(e)};var k=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}))},C=Object(a.createContext)({addNote:function(){},editNoteName:function(){},removeNote:function(){},notes:[],currentNote:null});function w(e){var t=Object(a.useState)([]),n=Object(u.a)(t,2),o=n[0],r=n[1],l=Object(a.useState)(null),s=Object(u.a)(l,2),m=s[0],d=s[1],f=Object(i.f)().push,b=Object(a.useCallback)((function(){var e=N();r(e)}),[]);Object(a.useEffect)((function(){b(),d(null)}),[b]),Object(a.useEffect)((function(){localStorage.setItem("note_lists",JSON.stringify(o))}),[o]);var v=Object(a.useCallback)((function(e){var t=o.some((function(t){return t.name.toLowerCase()===e.toLowerCase()})),n=null;if(e?"note_lists"===e||"typing_mode"===e?n="This name is not allowed":t?n="This name is already taken":e.match(/[#/]/)&&(n="You can't use # or / characters"):n="Name can not be empty",n)throw new Error(n)}),[o]),g=Object(a.useCallback)((function(e,t){v(e);var n=[{name:e,id:k()}].concat(Object(j.a)(o));r(n),localStorage.setItem(e,JSON.stringify({name:e,value:""})),f("/note/".concat(e)),t()}),[o,v,f]),E=Object(a.useCallback)((function(e){var t,n,a=o.filter((function(t){return t.name!==e}));r(a),f("/note/".concat(null!==(t=null===(n=a[0])||void 0===n?void 0:n.name)&&void 0!==t?t:"")),localStorage.removeItem(e)}),[o,f]),p=Object(a.useCallback)((function(e,t,n){if(v(t),"note_lists"!==t&&"typing_mode"!==t){var a=o.map((function(n){return n.name===e?Object(h.a)({},n,{name:t}):n})),c=localStorage.getItem(e);if(c){var l=JSON.parse(c),i=JSON.stringify({name:t,value:null===l||void 0===l?void 0:l.value});localStorage.setItem(t,i),r(a),localStorage.setItem("note_lists",JSON.stringify(a)),n()}f("/note/".concat(t)),localStorage.removeItem(e)}else alert("this name is not allowed")}),[v,o,f]);return c.a.createElement(C.Provider,{value:{addNote:g,editNoteName:p,removeNote:E,notes:o,currentNote:m}},e.children)}var x=function(){return Object(a.useContext)(C)},S=document.getElementById("modal-root"),y=function(e){var t=e.children;return Object(a.useEffect)((function(){return S.classList.add("shown"),function(){S.classList.remove("shown")}}),[]),r.a.createPortal(t,S)},I=function(){var e=Object(a.useState)(!1),t=Object(u.a)(e,2),n=t[0],o=t[1],r=Object(i.g)().noteId,l=Object(a.useState)(r),s=Object(u.a)(l,2),m=s[0],d=s[1],f=x(),b=f.editNoteName,v=f.removeNote;Object(a.useEffect)((function(){d(r)}),[r]);var g=Object(a.useCallback)((function(){o((function(e){return!e}))}),[]),E=Object(a.useCallback)((function(){try{b(r,m,g)}catch(e){alert(e)}}),[b,m,r,g]),p=Object(a.useCallback)((function(){v(r)}),[r,v]),h=Object(a.useCallback)((function(e){e.preventDefault(),g()}),[g]),j=Object(a.useCallback)((function(e){13===e.keyCode&&E()}),[E]),N=Object(a.useCallback)((function(e){return d(e.target.value)}),[]);return c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"note-settings",onClick:g},c.a.createElement("img",{src:O.a,alt:"React Logo",className:"cog-icon"})),n&&c.a.createElement(y,null,c.a.createElement("div",{className:"add-note-wrappper"},c.a.createElement("div",{className:"add-note-container"},c.a.createElement("a",{href:"/",onClick:h},"Close"),c.a.createElement("input",{value:m,onChange:N,onKeyDown:j}),c.a.createElement("div",{className:"mb"},c.a.createElement("button",{className:"button",onClick:E},"Edit note name")),c.a.createElement("button",{className:"button button-danger",onClick:p},"Delete note")),c.a.createElement("div",{onClick:g,className:"add-note-background"}))))},M=function(e){var t=e.typingMode,n=e.mode,o=e.onToggleChange,r=Object(a.useCallback)((function(){return o(n)}),[o,n]);return c.a.createElement("button",{className:"mode-button".concat(t===n?" mode-button-active":""),onClick:r},n)},J=function(e,t){var n=e.getSelection();n.length>0&&("".concat(n.slice(0,2)).concat(n.slice(-2))===t+t?e.replaceSelection("".concat(n.slice(2).slice(0,-2))):e.replaceSelection("".concat(t).concat(n).concat(t)))},_={mode:"markdown",autofocus:!0,extraKeys:{"Cmd-B":function(e){return J(e,"**")},"Cmd-I":function(e){return J(e,"*")}}},T=function(e){var t=e.markdown,n=e.setMarkdown,a=e.sourcePosition,o=e.checked,r=e.children;return c.a.createElement("li",null,c.a.createElement("input",{type:"checkbox",checked:o,onChange:function(){try{var e=a.start.line-1,c=t.split("\n"),r=o?"- [x]":"- [ ]",l=o?"- [ ]":"- [x]";c[e]=c[e].replace(r,l),n(c.join("\n"))}catch(i){console.warn("Error while filpin checkbox: ",i)}}}),r)},D=["edit","preview","both"],P=function(){var e=function(){var e=Object(a.useState)(""),t=Object(u.a)(e,2),n=t[0],c=t[1],o=Object(i.g)().noteId,r=localStorage.getItem("typing_mode"),l="preview"===r?"preview":"edit"===r?"edit":"both",s=Object(a.useState)(l),m=Object(u.a)(s,2),d=m[0],f=m[1],b=Object(a.useState)(""),v=Object(u.a)(b,2),g=v[0],E=v[1];Object(a.useEffect)((function(){localStorage.setItem("typing_mode",d)}),[d]),Object(a.useEffect)((function(){var e=localStorage.getItem(o);e&&(E(JSON.parse(e).name),c(JSON.parse(e).value))}),[o,c]),Object(a.useEffect)((function(){o&&n&&localStorage.setItem(o,JSON.stringify({name:g,value:n}))}),[n,o,g]);var p=Object(a.useCallback)((function(e,t,n){c(n)}),[c]);return{note:n,setNote:c,noteName:g,typingMode:d,setTypingMode:f,handleCodeMirrorChange:p}}(),t=e.note,n=e.setNote,o=e.noteName,r=e.typingMode,l=e.setTypingMode,m=e.handleCodeMirrorChange,f={listItem:function(e){var a=e.children;if("boolean"===typeof e.checked){var o=e.checked,r=e.sourcePosition;return c.a.createElement(T,{markdown:t,setMarkdown:n,checked:o,sourcePosition:r},a)}return c.a.createElement("li",null,a)},code:E},v="preview"===r,g="both"===r,p="edit"===r;return c.a.createElement("div",{className:"note"},c.a.createElement(I,null),c.a.createElement("div",{className:b()("note-wrapper",{"note-wrapper--both":g})},c.a.createElement("div",{className:"mode-buttons-container"},D.map((function(e){return c.a.createElement(M,{key:e,mode:e,typingMode:r,onToggleChange:l})}))),c.a.createElement("h1",{className:"note-title"},o),c.a.createElement("div",{className:"note-container"},(p||g)&&c.a.createElement("div",{className:"code-mirror-container"},c.a.createElement(s.Controlled,{value:t,options:_,onBeforeChange:m})),(v||g)&&c.a.createElement("div",{className:"react-markdown-container markdown-body"},c.a.createElement(d.a,{renderers:f,source:t,rawSourcePos:!0,escapeHtml:!1})))))},B=function(e){var t=e.toggleMode,n=Object(a.useState)(""),o=Object(u.a)(n,2),r=o[0],l=o[1],i=Object(a.useRef)(),s=x().addNote;Object(a.useEffect)((function(){var e;null===(e=i.current)||void 0===e||e.focus()}),[]);var m=Object(a.useCallback)((function(){try{s(r,t)}catch(e){alert(e)}}),[s,r,t]),d=Object(a.useCallback)((function(e){e.preventDefault(),t()}),[t]),f=Object(a.useCallback)((function(e){l(e.target.value)}),[]),b=Object(a.useCallback)((function(e){13===e.keyCode&&m()}),[m]);return c.a.createElement(y,null,c.a.createElement("div",{className:"add-note-wrappper"},c.a.createElement("div",{className:"add-note-container"},c.a.createElement("a",{href:"/",onClick:d},"Close"),c.a.createElement("input",{ref:function(e){return i.current=e},value:r,onChange:f,onKeyDown:b}),c.a.createElement("button",{className:"button",onClick:m},"Add new note")),c.a.createElement("div",{onClick:t,className:"add-note-background"})))},L=n(420),K=function(){var e=x().notes,t=Object(i.g)().noteId;return c.a.createElement("div",{className:"links-container"},e.map((function(e,n){return c.a.createElement(l.b,{key:n,to:"/note/".concat(e.name),className:t===e.name?"active-item":""},e.name)})))};var R=function(){var e=Object(a.useState)(!1),t=Object(u.a)(e,2),n=t[0],o=t[1],r=Object(a.useState)(!1),l=Object(u.a)(r,2),i=l[0],s=l[1],m=Object(a.useRef)(null),d=Object(a.useCallback)((function(){o((function(e){return!e}))}),[]),f=Object(a.useCallback)((function(e){e.preventDefault(),d()}),[d]);return c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:b()("sidebar-toggle",{"sidebar-toggle--opened":i}),onClick:function(){return s(!i)}},c.a.createElement("span",{className:"burger-line burger-line-1"}),c.a.createElement("span",{className:"burger-line burger-line-1"}),c.a.createElement("span",{className:"burger-line burger-line-1"})),c.a.createElement(L.a,{in:i,timeout:200,classNames:"sidebar-wrapper"},c.a.createElement("div",{className:"sidebar-wrapper",ref:function(e){return m.current=e}},c.a.createElement("div",{className:"sidebar-container"},c.a.createElement("h1",null,"Notes app"),c.a.createElement("a",{href:"/",onClick:f},"Add note"),c.a.createElement(K,null)))),n&&c.a.createElement(B,{toggleMode:d}))},A=function(){return c.a.createElement("div",{className:"error-container"},c.a.createElement("h1",null,"This note wasn't found"))},F=function(){var e=Object(a.useState)(!1),t=Object(u.a)(e,2),n=t[0],o=t[1];return Object(a.useEffect)((function(){var e=setTimeout((function(){o(!0)}),1e3);return clearTimeout(e)}),[]),c.a.createElement("div",{className:"empty-container"},c.a.createElement("h1",null,"You don't have any note"),c.a.createElement("p",{className:b()("add-new-info",{"add-new-info--shown":n})},"\u2190 Click here to add one"))};var W=function(){var e=Object(a.useState)(!1),t=Object(u.a)(e,2),n=t[0],o=t[1],r=Object(a.useState)(!1),l=Object(u.a)(r,2),s=l[0],m=l[1],d=Object(i.g)().noteId,f=x().notes,b=Object(i.f)().push;return Object(a.useEffect)((function(){document.title=d||"notes",f&&0!==f.length?(m(!1),!d&&f.length>0&&b("/note/".concat(f[0].name)),f.some((function(e){return e.name===d}))?o(!1):o(!0)):m(!0)}),[d,f,b]),c.a.createElement("div",{className:"home-container"},c.a.createElement(R,null),!n&&!s&&c.a.createElement(P,{key:d}),!n&&s&&c.a.createElement(F,null),n&&!s&&c.a.createElement(A,null))};function Y(){return c.a.createElement(l.a,{basename:"/"},c.a.createElement("div",null,c.a.createElement(w,null,c.a.createElement(i.c,null,c.a.createElement(i.a,{path:"/note/:noteId",children:c.a.createElement(W,null)}),c.a.createElement(i.a,{path:"/"},c.a.createElement(W,null))))))}Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));n(412),n(413),n(414),n(67),n(415),n(417);r.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(Y,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},71:function(e,t,n){e.exports=n.p+"static/media/Cog_font_awesome.69de4447.svg"},76:function(e,t,n){e.exports=n(418)},81:function(e,t,n){},82:function(e,t,n){}},[[76,1,2]]]);
//# sourceMappingURL=main.6ef98b02.chunk.js.map