(this["webpackJsonpnotes-app"]=this["webpackJsonpnotes-app"]||[]).push([[0],{206:function(e,t){},420:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),o=n(9),r=n.n(o),l=(n(82),n(83),n(12)),u=n(1),i=n(2),s=n(69),m=n(70),d=n.n(m),b=n(14),f=n.n(b),v=n(71),O=n.n(v),g=function(e){var t=e.value,n=e.language;return c.a.createElement(O.a,{language:n},t)},E=n(3),p=n(72),N=n.n(p),j=n(75),h=n(74),k=function(){var e=localStorage.getItem("note_lists")||"[]";return JSON.parse(e)};var C=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}))},S=Object(a.createContext)({addNote:function(){},editNoteName:function(){},removeNote:function(){},notes:[],currentNote:null});function w(e){var t=Object(a.useState)([]),n=Object(i.a)(t,2),o=n[0],r=n[1],l=Object(a.useState)(null),s=Object(i.a)(l,2),m=s[0],d=s[1],b=Object(u.f)().push,f=Object(a.useCallback)((function(){var e=k();r(e)}),[]);Object(a.useEffect)((function(){f(),d(null)}),[f]),Object(a.useEffect)((function(){localStorage.setItem("note_lists",JSON.stringify(o))}),[o]);var v=Object(a.useCallback)((function(e){var t=o.some((function(t){return t.name.toLowerCase()===e.toLowerCase()})),n=null;if(e?"note_lists"===e||"typing_mode"===e?n="This name is not allowed":t?n="This name is already taken":e.match(/[#/]/)&&(n="You can't use # or / characters"):n="Name can not be empty",n)throw new Error(n)}),[o]),O=Object(a.useCallback)((function(e,t){v(e);var n=[{name:e,id:C()}].concat(Object(h.a)(o));r(n),localStorage.setItem(e,JSON.stringify({name:e,value:""})),b("/note/".concat(e)),t()}),[o,v,b]),g=Object(a.useCallback)((function(e,t){var n,a,c=o.filter((function(t){return t.name!==e}));r(c),b("/note/".concat(null!==(n=null===(a=c[0])||void 0===a?void 0:a.name)&&void 0!==n?n:"")),localStorage.removeItem(e),t()}),[o,b]),E=Object(a.useCallback)((function(e,t,n){v(t);var a=o.map((function(n){return n.name===e?Object(j.a)({},n,{name:t}):n})),c=localStorage.getItem(e);if(c){var l=JSON.parse(c),u=JSON.stringify({name:t,value:null===l||void 0===l?void 0:l.value});localStorage.setItem(t,u),r(a),localStorage.setItem("note_lists",JSON.stringify(a)),n()}b("/note/".concat(t)),localStorage.removeItem(e)}),[v,o,b]);return c.a.createElement(S.Provider,{value:{addNote:O,editNoteName:E,removeNote:g,notes:o,currentNote:m}},e.children)}var x=function(){return Object(a.useContext)(S)},y=document.getElementById("modal-root"),I=function(e){var t=e.children;return Object(a.useEffect)((function(){return y.classList.add("shown"),function(){y.classList.remove("shown")}}),[]),r.a.createPortal(t,y)},T=function(){var e=Object(a.useState)(!1),t=Object(i.a)(e,2),n=t[0],o=t[1],r=Object(u.g)().noteId,l=Object(a.useState)(r),s=Object(i.a)(l,2),m=s[0],d=s[1],b=x(),f=b.editNoteName,v=b.removeNote;Object(a.useEffect)((function(){d(r)}),[r]);var O=Object(a.useCallback)((function(){o((function(e){return!e}))}),[]),g=Object(a.useCallback)((function(){try{f(r,m,(function(){E.b.success("Note name edited successfuly",{position:E.b.POSITION.TOP_RIGHT}),O()}))}catch(e){E.b.error(e,{position:E.b.POSITION.TOP_LEFT})}}),[f,m,r,O]),p=Object(a.useCallback)((function(){v(r,(function(){E.b.success("Note deleted successfuly",{position:E.b.POSITION.TOP_RIGHT})}))}),[r,v]),j=Object(a.useCallback)((function(e){e.preventDefault(),O()}),[O]),h=Object(a.useCallback)((function(e){13===e.keyCode&&g()}),[g]),k=Object(a.useCallback)((function(e){return d(e.target.value)}),[]);return c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"note-settings",onClick:O},c.a.createElement("img",{src:N.a,alt:"React Logo",className:"cog-icon"})),n&&c.a.createElement(I,null,c.a.createElement("div",{className:"add-note-wrappper"},c.a.createElement("div",{className:"add-note-container"},c.a.createElement("a",{href:"/",onClick:j},"Close"),c.a.createElement("input",{value:m,onChange:k,onKeyDown:h}),c.a.createElement("div",{className:"mb"},c.a.createElement("button",{className:"button",onClick:g},"Edit note name")),c.a.createElement("button",{className:"button button-danger",onClick:p},"Delete note")),c.a.createElement("div",{onClick:O,className:"add-note-background"}))))},P=function(e){var t=e.typingMode,n=e.mode,o=e.onToggleChange,r=Object(a.useCallback)((function(){return o(n)}),[o,n]);return c.a.createElement("button",{className:"mode-button".concat(t===n?" mode-button-active":""),onClick:r},n)},M=function(e,t){var n=e.getSelection();n.length>0&&("".concat(n.slice(0,2)).concat(n.slice(-2))===t+t?e.replaceSelection("".concat(n.slice(2).slice(0,-2))):e.replaceSelection("".concat(t).concat(n).concat(t)))},_={mode:"markdown",autofocus:!0,extraKeys:{"Cmd-B":function(e){return M(e,"**")},"Cmd-I":function(e){return M(e,"*")}}},J=function(e){var t=e.markdown,n=e.setMarkdown,a=e.sourcePosition,o=e.checked,r=e.children;return c.a.createElement("li",null,c.a.createElement("input",{type:"checkbox",checked:o,onChange:function(){try{var e=a.start.line-1,c=t.split("\n"),r=o?"- [x]":"- [ ]",l=o?"- [ ]":"- [x]";c[e]=c[e].replace(r,l),n(c.join("\n"))}catch(u){console.warn("Error while filpin checkbox: ",u)}}}),r)},R=["edit","preview","both"],D=function(){var e=function(){var e=Object(a.useState)(""),t=Object(i.a)(e,2),n=t[0],c=t[1],o=Object(u.g)().noteId,r=localStorage.getItem("typing_mode"),l="preview"===r?"preview":"edit"===r?"edit":"both",s=Object(a.useState)(l),m=Object(i.a)(s,2),d=m[0],b=m[1],f=Object(a.useState)(""),v=Object(i.a)(f,2),O=v[0],g=v[1];Object(a.useEffect)((function(){localStorage.setItem("typing_mode",d)}),[d]),Object(a.useEffect)((function(){var e=localStorage.getItem(o);e&&(g(JSON.parse(e).name),c(JSON.parse(e).value))}),[o,c]),Object(a.useEffect)((function(){o&&n&&localStorage.setItem(o,JSON.stringify({name:O,value:n}))}),[n,o,O]);var E=Object(a.useCallback)((function(e,t,n){c(n)}),[c]);return{note:n,setNote:c,noteName:O,typingMode:d,setTypingMode:b,handleCodeMirrorChange:E}}(),t=e.note,n=e.setNote,o=e.noteName,r=e.typingMode,l=e.setTypingMode,m=e.handleCodeMirrorChange,b={listItem:function(e){var a=e.children;if("boolean"===typeof e.checked){var o=e.checked,r=e.sourcePosition;return c.a.createElement(J,{markdown:t,setMarkdown:n,checked:o,sourcePosition:r},a)}return c.a.createElement("li",null,a)},code:g},v="preview"===r,O="both"===r,E="edit"===r;return c.a.createElement("div",{className:"note"},c.a.createElement(T,null),c.a.createElement("div",{className:f()("note-wrapper",{"note-wrapper--both":O})},c.a.createElement("div",{className:"mode-buttons-container"},R.map((function(e){return c.a.createElement(P,{key:e,mode:e,typingMode:r,onToggleChange:l})}))),c.a.createElement("h1",{className:"note-title"},o),c.a.createElement("div",{className:"note-container"},(E||O)&&c.a.createElement("div",{className:"code-mirror-container"},c.a.createElement(s.Controlled,{value:t,options:_,onBeforeChange:m})),(v||O)&&c.a.createElement("div",{className:"react-markdown-container markdown-body"},c.a.createElement(d.a,{renderers:b,source:t,rawSourcePos:!0,escapeHtml:!1})))))},L=function(e){var t=e.toggleMode,n=Object(a.useState)(""),o=Object(i.a)(n,2),r=o[0],l=o[1],u=Object(a.useRef)(),s=x().addNote;Object(a.useEffect)((function(){var e;null===(e=u.current)||void 0===e||e.focus()}),[]);var m=Object(a.useCallback)((function(){try{s(r,(function(){E.b.success("Note added successfuly",{position:E.b.POSITION.TOP_RIGHT}),t()}))}catch(e){E.b.error(e.message,{position:E.b.POSITION.TOP_RIGHT})}}),[s,r,t]),d=Object(a.useCallback)((function(e){e.preventDefault(),t()}),[t]),b=Object(a.useCallback)((function(e){l(e.target.value)}),[]),f=Object(a.useCallback)((function(e){13===e.keyCode&&m()}),[m]);return c.a.createElement(I,null,c.a.createElement("div",{className:"add-note-wrappper"},c.a.createElement("div",{className:"add-note-container"},c.a.createElement("a",{href:"/",onClick:d},"Close"),c.a.createElement("input",{ref:function(e){return u.current=e},value:r,onChange:b,onKeyDown:f}),c.a.createElement("button",{className:"button",onClick:m},"Add new note")),c.a.createElement("div",{onClick:t,className:"add-note-background"})))},B=n(422),H=function(){var e=x().notes,t=Object(u.g)().noteId;return c.a.createElement("div",{className:"links-container"},e.map((function(e,n){return c.a.createElement(l.b,{key:n,to:"/note/".concat(e.name),className:t===e.name?"active-item":""},e.name)})))};var G=function(){var e=Object(a.useState)(!1),t=Object(i.a)(e,2),n=t[0],o=t[1],r=Object(a.useState)(!1),l=Object(i.a)(r,2),u=l[0],s=l[1],m=Object(a.useRef)(null),d=Object(a.useCallback)((function(){o((function(e){return!e}))}),[]),b=Object(a.useCallback)((function(e){e.preventDefault(),d()}),[d]);return c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:f()("sidebar-toggle",{"sidebar-toggle--opened":u}),onClick:function(){return s(!u)}},c.a.createElement("span",{className:"burger-line burger-line-1"}),c.a.createElement("span",{className:"burger-line burger-line-1"}),c.a.createElement("span",{className:"burger-line burger-line-1"})),c.a.createElement(B.a,{in:u,timeout:200,classNames:"sidebar-wrapper"},c.a.createElement("div",{className:"sidebar-wrapper",ref:function(e){return m.current=e}},c.a.createElement("div",{className:"sidebar-container"},c.a.createElement("h1",null,"Notes app"),c.a.createElement("a",{href:"/",onClick:b},"Add note"),c.a.createElement(H,null)))),n&&c.a.createElement(L,{toggleMode:d}))},F=function(){return c.a.createElement("div",{className:"error-container"},c.a.createElement("h1",null,"This note wasn't found"))},K=function(){var e=Object(a.useState)(!1),t=Object(i.a)(e,2),n=t[0],o=t[1];return Object(a.useEffect)((function(){var e=setTimeout((function(){o(!0)}),1e3);return clearTimeout(e)}),[]),c.a.createElement("div",{className:"empty-container"},c.a.createElement("h1",null,"You don't have any note"),c.a.createElement("p",{className:f()("add-new-info",{"add-new-info--shown":n})},"\u2190 Click here to add one"))};var A=function(){var e=Object(a.useState)(!1),t=Object(i.a)(e,2),n=t[0],o=t[1],r=Object(a.useState)(!1),l=Object(i.a)(r,2),s=l[0],m=l[1],d=Object(u.g)().noteId,b=x().notes,f=Object(u.f)().push;return Object(a.useEffect)((function(){document.title=d||"notes",b&&0!==b.length?(m(!1),!d&&b.length>0&&f("/note/".concat(b[0].name)),b.some((function(e){return e.name===d}))?o(!1):o(!0)):m(!0)}),[d,b,f]),c.a.createElement("div",{className:"home-container"},c.a.createElement(G,null),!n&&!s&&c.a.createElement(D,{key:d}),!n&&s&&c.a.createElement(K,null),n&&!s&&c.a.createElement(F,null))};function W(){return c.a.createElement(l.a,{basename:"/"},c.a.createElement("div",null,c.a.createElement(w,null,c.a.createElement(u.c,null,c.a.createElement(u.a,{path:"/note/:noteId",children:c.a.createElement(A,null)}),c.a.createElement(u.a,{path:"/"},c.a.createElement(A,null)))),c.a.createElement(E.a,null)))}Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));n(413),n(414),n(415),n(68),n(416),n(418),n(419);r.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(W,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},72:function(e,t,n){e.exports=n.p+"static/media/Cog_font_awesome.69de4447.svg"},77:function(e,t,n){e.exports=n(420)},82:function(e,t,n){},83:function(e,t,n){}},[[77,1,2]]]);
//# sourceMappingURL=main.646c0941.chunk.js.map